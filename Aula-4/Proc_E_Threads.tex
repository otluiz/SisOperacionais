
\documentclass{beamer}
%\usepackage[utf8]{inputenc}
%\usetheme{AnnArbor}
\usecolortheme{orchid}
\setbeamertemplate{navigation symbols}{}
\usepackage{graphicx}
\usepackage{amssymb,amsmath}
\usepackage{color}
\usepackage{textcomp}
\usepackage[brazil]{babel}
\usepackage[latin1]{inputenc}
\everymath{\displaystyle}
\usepackage{amsthm,amsfonts}
\usepackage{indentfirst}
\usepackage{graphicx}
\usepackage{amsthm}
\usepackage{graphics}
\usepackage{beamerthemeshadow}
\newtheorem{defi}{{Definição}}
\newtheorem{teo}{{Teorema}}
\begin{document}



\title[Processos \& Threads]{Processos \& Threads}
\author[ Othon Luiz Teixeira de Oliveira ]
{\\[10pt]\textcolor{blue}{\large Othon Luiz Teixeira de Oliveira }\\[10pt]\textcolor{blue}{\large } }

\date{}
\begin{frame}
\titlepage
\end{frame}

\begin{frame}\frametitle{Sumário}\tableofcontents
\end{frame}


\section{Introdução}
\subsection*{Introdução}


\begin{frame}\frametitle{Introdução}
\begin{block}{}
\begin{itemize}
  \item Nosso estudo está focado em como os sistemas operacionais são projetados e construídos.
 
 \pause
 \item O conceito central em qualquer sistema operacional é o processo.

\pause

  \item Um processo é uma abstração de um programa em execução.

\end{itemize}
\end{block}
\end{frame}




\begin{frame}\frametitle{Ideia central}

\begin{block}{Várias coisas ao mesmo tempo}
\begin{itemize}
  \item  Enquanto executa um programa do usuário, um computador pode também ler os dados de um disco e mostrar na tela ou enviá-lo a uma impressora

  \pause
\item Em sistemas multiprogramados a CPU ``salta'' de programa para programa, executando cada um deles por alguns milissegundos

  \pause
\item Ou seja; enquanto a cada instante a CPU executa somente um programa, no passar de 1 segundo ela pode ter trabalhado em vários programas.

  \pause
\item 1 seg. = 1 000 milissegundos = 1 000 000 microssegundos = 1 000 000 000 nanossegundos
\end{itemize}
\end{block}
\end{frame}



\section{Processos}
\subsection*{Modelo}


\begin{frame}\frametitle{ Modelo de Processo}

\begin{block}{ Nosso Modelo de Processo}
\begin{enumerate}
  \item Em Nosso MODELO todos os softwares podem executar em um computador -- inclusive o próprio SO

  \pause
  \item Inclusive o próprio S.O. então um programa (software) pode dar origem a --- Processos organizados em vários ``processos''
  
    \pause
  \item Um processo é apenas um programa em execução acompanhado dos valores atuais do controlador de processos, dos registradores e das variáveis;
  
  \pause
 \item Conceitualmente cada processo ``pensa'' ter sua própria CPU;
 
   \pause
 \item Na realidade a CPU troca, a todo momento, de um processo para outro.
 
\end{enumerate}
\end{block}
\end{frame}





\begin{frame}\frametitle{ Alternância entre Processos}
\begin{columns}


\begin{column}{2.5cm}
\begin{figure}[ht]
\begin{center}
\includegraphics[height=2.5cm]{Figuras/pi}
\caption{Multiprogramação de 4 processos}
\end{center}

\end{figure}
\end{column}

\pause

\begin{column}{2.5cm}
\begin{figure}[ht]
\begin{center}
\includegraphics[height=2.5cm]{Figuras/wile}
\caption{Modelo conceitual de 4 processos sequenciais independentes}
\end{center}
\end{figure}
\end{column}


\end{columns}
\end{frame}



\begin{frame}\frametitle{ Contador de Programas}


\begin{block}{Contador de Programas}
\begin{itemize}
  \item  Na primeira figura vimos um computador multiprogramado com 4 processos na memoria.
  
  \pause  
    \item Na segunda figura estão 4 processos, cada um com seu próprio fluxo de controle, isto é; seu próprio contador de programas (lógico)
  
  \pause
    \item Contudo só há um contador de programa real 
  
  \pause
    \item Quando acaba o tempo da CPU alocado para um processo, o contador de programas físico é salvo no contador de programas lógico, do processo em memória.

\end{itemize}
\end{block}
\end{frame}


\section{Exemplo}
\subsection*{O cientista confeiteiro}


\begin{frame}\frametitle{ Exemplo}


\begin{block}{ O cientista confeiteiro}
\begin{itemize}
  \item  Imagine um cientista em computação com seus dotes culinários vai fazer um bolo de aniversário para sua filha.
\pause
  \item Ele tem a receita e uma cozinha bem equipada, com todos os ingredientes: farinha, ovos, açúcar, essência de coco, entre outros.
\pause
  \item Nessa analogia a receita é o programa(o algoritmo), os ingredientes são as entradas (os inputs) e o processador é o cientista. Pergunta: E o processo ???
\pause
    \item  Agora imagine que o outro filho do cientista chegue chorando; cortou o dedo. O cientista registra onde estava na receita (estado atual do processo é salvo)

\end{itemize}
\end{block}
\end{frame}



\begin{frame}\frametitle{ Exemplo - cont...}


\begin{block}{ O cientista confeiteiro}
\begin{itemize}

\pause
  \item Pega um livro de primeiros socorros e segue as instruções contidas nele. Nesse ponto o processador está sendo alternado de um processo (assar o bolo) para outro processo de maior prioridade (socorrer o outro filho).
\pause
  \item A ideia principal é que um processo constitui uma atividade. Ele possui um programa, entrada, saída e um estado. 
\pause
  \item Cada processador pode ser compartilhado entre vários processos, com algum algoritmo de escalonamento, usado para determinar quando parar o trabalho sobre um processo e servir um outro.

\end{itemize}
\end{block}
\end{frame}


\section{Criação e Termino de Processos}
\subsection*{Introdução}

\begin{frame}\frametitle{ Criação de processos}

\begin{block}{Existência de processos}
\begin{itemize}
  \item  O sistema operacional precisa de alguma maneira assegurar todos os processos necessários.
  \pause
    \item Um forno de micro-ondas é um sistema simples ?
   
  \pause
    \item Em sistemas simples (embarcados ??) que executam apenas uma única aplicação, é possível que todos os processos sejam iniciados quando o sistema é ligado 
\end{itemize}
\end{block}
\end{frame}


\subsection*{Criação}

\begin{frame}\frametitle{ Sistemas de propósito geral}

Há 4 eventos principais que fazem processos serem criados

\begin{block}{}
\begin{enumerate}
	\item[1.] Inicio do sistema.
	\item[2.] Execução de uma chamada ao sistema de criação de processo por um processo 				  em execução
	\item[3.] Uma requisição do usuário para criar um novo processo.
	\item[4.] Inicio de um job em lote.
\end{enumerate}
\end{block}
\end{frame}


\subsection*{Termino}

\begin{frame}\frametitle{ Sistemas de propósito geral}

Depois de criado um processo começa a executar e faz seu trabalho.
Contudo nem mesmo os processos são para sempre.
Mais cedo ou mais tarde em razão das seguintes condições:

\begin{block}{Condições de termino}
\begin{enumerate}
	\item[1.] Saída normal (voluntária).
	\item[2.] Saída por erro (voluntária).
	\item[3.] Erro fatal (involuntário).
	\item[4.] Cancelamento por um outro processo (involuntário).
\end{enumerate}
\end{block}
\end{frame}



\subsection*{Hierarquia de Processos}

\begin{frame}\frametitle{ Sistemas de propósito geral}

Em alguns sistemas, quando um processo cria outro processo, o processo pai e o processo filho,  de certa forma permanecem associados. O próprio processo filho pode criar outros processos, gerando um hierarquia de processos

\begin{block}{Unix}

No Unix um processo pai e todos os processos filhos formam um grupo de processos.
No Windows não ha nenhum conceito de hierarquia de processos.
Algo parecido ocorre quando um processo um processo ``pai'' (chamado handle) pode usar para controlar o filho, contudo ele é livre para passar esse identificador para outro processo.\\
Os processos no Unix não podem deserdas seus filhos.
\end{block}
\end{frame}


\subsection*{Concatenando de processos}

\begin{frame}\frametitle{ Estados de um processo}

Embora cada processo seja uma entidade independente, com seu  contador de programas, muitas vezes um processo precisam interagir com outros processos.\\
Um processo pode gerar uma saída que outro processo usa como entrada\\
\begin{block}{Comando}
 cat capitulo1 capitulo2 capitulo3 | grep tree
\end{block}

O processo cat concatena, para a saída padrão três processos. Dependendo das velocidades que dois processos (CPU, complexidade do processo) pode acontecer que o grep esteja pronto antes do car. O processo bloqueia ate que o cat tenha terminado

\end{frame}



\subsection*{Estados de um processo}

\begin{frame}\frametitle{ Estados de um processo -- simplificado}

Como vimos na aula anterior um processo pode estar em vários estados

\begin{block}{Estados principais de um processo}
\begin{enumerate}
	\item[1.] Em execução (realmente usando a CPU naquele instante)
	\item[2.] Pronto (executável; temporariamente parado para dar lugar a outro processo).
	\item[3.] Bloqueado (incapaz de executar enquanto um evento externo não ocorrer).
\end{enumerate}
\end{block}

\end{frame}


\begin{frame}\frametitle{ Estado simplificado dos processos}
Os dois primeiros estados são similares(Em execução e Pronto). Em ambos os casos o processo vai executar, só que no segundo não há CPU disponível para ele. O terceiro estado é diferente dos dois primeiros, pois o processo não pode executar, mesmo que a CPU não tenha nada pra fazer.

\begin{columns}

\begin{column}{0.01cm}
\begin{figure}[ht]
\begin{center}
\includegraphics[height=1.5cm]{Figuras/estadosprocesso1.jpg}
%\caption{Estados -- simplificado}
\end{center}

\end{figure}
\end{column}

\pause

\begin{column}{0.01cm}
\begin{figure}[ht]
\begin{center}
\includegraphics[height=3.5cm]{Figuras/estadosprocesso2.jpg}
%\caption{Máquina de estados finitos -- completo}
\end{center}
\end{figure}
\end{column}

\end{columns}
\end{frame}


\section{Threads}
\subsection*{Conceito}

\begin{frame}{Espaço de endereçamento}
 Em sistemas tradicionais, cada processo tem um espaço de endereçamento e um único Thread (fluxo) de controle.
 \begin{block}{Definição}
 	Isso é quase uma definição de processo, exceto pelo espaço de endereçamento
 \end{block}
 Contudo é frequente querer ter múltiplos threads em um único espaço de endereçamento executando em quase-paralelamente, como se fossem processos separados.
\end{frame}


\begin{frame}\frametitle{ Um processo com múltiplas threads}

\begin{columns}

\begin{column}{0.01cm}
\begin{figure}[ht]
\begin{center}
\includegraphics[height=3.3cm]{Figuras/process-thread1.png}
%\caption{Estados -- simplificado}
\end{center}

\end{figure}
\end{column}

\pause

\begin{column}{0.01cm}
\begin{figure}[ht]
\begin{center}
\includegraphics[height=3.5cm]{Figuras/process-thread3.png}
%\caption{Máquina de estados finitos -- completo}
\end{center}
\end{figure}
\end{column}

\end{columns}
\end{frame}

\subsection*{Trabalho de Pesquisa}

\begin{frame}\frametitle{ Processos Preemptivos e Não-Preemptivos}


\begin{block}{Estados principais de um processo}
Pesquisar o que são esses tipos de processos (Preemptivos e Não-Preemptivos), descrevendo cada algoritmo que existe.
\end{block}

\begin{block}{Estados principais de um processo}
Assistam o vídeo da Aula 4 para entender o que pesquisar
\end{block}
\end{frame}

\end{document} 